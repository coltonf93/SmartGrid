document.addEventListener('DOMContentLoaded', function(){ // on dom ready var cy = cytoscape({ container: document.querySelector('#cy'), boxSelectionEnabled: false, autounselectify: true, style: cytoscape.stylesheet() .selector('node') .css({ 'content': 'data(id)', width: '60px', height: '60px', 'text-valign': 'center', 'color': 'white', 'text-outline-width': 2, 'text-outline-color': '#888', 'pie-size': '80%', 'pie-1-background-color': '#E8747C', 'pie-1-background-size': 'mapData(foo, 0, 10, 0, 100)', 'pie-2-background-color': '#74CBE8', 'pie-2-background-size': 'mapData(bar, 0, 10, 0, 100)', 'pie-3-background-color': '#74E883', 'pie-3-background-size': 'mapData(baz, 0, 10, 0, 100)' }) .selector('edge') .css({ 'target-arrow-shape': 'triangle' }) .selector(':selected') .css({ 'background-color': 'black', 'line-color': 'green', 'target-arrow-color': 'green', 'source-arrow-color': 'green' }) .selector('.faded') .css({ 'opacity': 0.15, 'text-opacity': 0 }),
elements: {nodes:[{ data: { id: 'MainGrid', foo: 3, bar: 3, baz: 4 } },
{ data: { id: 'Consumer 1', foo: 3, bar: 3, baz: 4 } },
{ data: { id: 'Consumer 2', foo: 3, bar: 3, baz: 4 } },
{ data: { id: 'Solar 1', foo: 3, bar: 3, baz: 4 } },
{ data: { id: 'Solar 2', foo: 3, bar: 3, baz: 4 } },
{ data: { id: 'Wind 1', foo: 3, bar: 3, baz: 4 } },
{ data: { id: 'Wind 2', foo: 3, bar: 3, baz: 4 } },
{ data: { id: 'Storage 1', foo: 3, bar: 3, baz: 4 } },
{ data: { id: 'Storage 2', foo: 3, bar: 3, baz: 4 } },
],
edges:[{ data: { id: 'link00', weight: 1, source: 'Wind 1', target: 'MainGrid' } },{ data: { id: 'link01', weight: 1, source: 'Wind 2', target: 'MainGrid' } },{ data: { id: 'link02', weight: 1, source: 'Solar 1', target: 'MainGrid' } },{ data: { id: 'link03', weight: 1, source: 'Solar 2', target: 'MainGrid' } },{ data: { id: 'link04', weight: 1, source: 'Storage 1', target: 'MainGrid' } },{ data: { id: 'link05', weight: 1, source: 'Storage 2', target: 'MainGrid' } },{ data: { id: 'link10', weight: 1, source: 'Wind 1', target: 'Consumer 1' } },{ data: { id: 'link11', weight: 1, source: 'Wind 2', target: 'Consumer 1' } },{ data: { id: 'link12', weight: 1, source: 'Solar 1', target: 'Consumer 1' } },{ data: { id: 'link13', weight: 1, source: 'Solar 2', target: 'Consumer 1' } },{ data: { id: 'link14', weight: 1, source: 'Storage 1', target: 'Consumer 1' } },{ data: { id: 'link15', weight: 1, source: 'Storage 2', target: 'Consumer 1' } },{ data: { id: 'link16', weight: 1, source: 'MainGrid', target: 'Consumer 1' } },{ data: { id: 'link20', weight: 1, source: 'Wind 1', target: 'Consumer 2' } },{ data: { id: 'link21', weight: 1, source: 'Wind 2', target: 'Consumer 2' } },{ data: { id: 'link22', weight: 1, source: 'Solar 1', target: 'Consumer 2' } },{ data: { id: 'link23', weight: 1, source: 'Solar 2', target: 'Consumer 2' } },{ data: { id: 'link24', weight: 1, source: 'Storage 1', target: 'Consumer 2' } },{ data: { id: 'link25', weight: 1, source: 'Storage 2', target: 'Consumer 2' } },{ data: { id: 'link26', weight: 1, source: 'MainGrid', target: 'Consumer 2' } },{ data: { id: 'link70', weight: 1, source: 'Wind 1', target: 'Storage 1' } },{ data: { id: 'link71', weight: 1, source: 'Wind 2', target: 'Storage 1' } },{ data: { id: 'link72', weight: 1, source: 'Solar 1', target: 'Storage 1' } },{ data: { id: 'link73', weight: 1, source: 'Solar 2', target: 'Storage 1' } },{ data: { id: 'link74', weight: 1, source: 'Storage 2', target: 'Storage 1' } },{ data: { id: 'link75', weight: 1, source: 'Storage 2', target: 'Storage 1' } },{ data: { id: 'link76', weight: 1, source: 'MainGrid', target: 'Storage 1' } },{ data: { id: 'link80', weight: 1, source: 'Wind 1', target: 'Storage 2' } },{ data: { id: 'link81', weight: 1, source: 'Wind 2', target: 'Storage 2' } },{ data: { id: 'link82', weight: 1, source: 'Solar 1', target: 'Storage 2' } },{ data: { id: 'link83', weight: 1, source: 'Solar 2', target: 'Storage 2' } },{ data: { id: 'link84', weight: 1, source: 'Storage 1', target: 'Storage 2' } },{ data: { id: 'link85', weight: 1, source: 'Storage 1', target: 'Storage 2' } },{ data: { id: 'link86', weight: 1, source: 'MainGrid', target: 'Storage 2' } },]},
layout: { /*ring, grid and*/ name: 'grid', padding: 10 } }); cy.on('tap', 'node', function(e){ var node = e.cyTarget; var neighborhood = node.neighborhood().add(node); cy.elements().addClass('faded'); neighborhood.removeClass('faded'); }); cy.on('tap', function(e){ if( e.cyTarget === cy ){ cy.elements().removeClass('faded'); } }); }); /* on dom ready*/
